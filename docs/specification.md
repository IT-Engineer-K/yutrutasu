# 📱 ゆるたす（yurutasu）仕様書

## 🎯 プロジェクト概要
- **名前**: ゆるたす（yurutasu）
- **コンセプト**: 疲れやすい人のための やさしい進捗管理アプリ
- **目的**: やる気が出ない日でも「ちょっとやった」が記録できる
- **開発プラットフォーム**: Flutter（マルチプラットフォーム対応）

## 🧠 基本コンセプト
- **3段階の進捗管理**：未着手（0%）→ ちょっとやった（50%）→ 完了（100%）
- **完璧主義からの脱却**：「ちょっとやった」も大切に評価
- **プロジェクト管理**：体系的な進捗管理を実現
- **温かいUI/UX**：見るだけで安心するデザイン

## 🔧 技術仕様

### 依存関係
- **開発フレームワーク**: Flutter (SDK ^3.5.3)
- **状態管理**: Provider パターン（`YaruKotoController`）
- **データ永続化**: SharedPreferences（JSON形式）
- **国際化対応**: 日本語・英語対応（`flutter_localizations`）
- **収益化**: Google AdMob 統合

### 1. YaruKoto（プロジェクト）
```dart
class YaruKoto {
  final String id;           // UUID
  final String title;        // プロジェクト名
  final String? description; // 説明（任意）
  final List<TaskItem> items; // 関連する項目
  final DateTime createdAt;   // 作成日時
  
  // 進捗率を自動計算（項目の平均値）
  double get progressPercentage;
  String get progressLabel;   // 🌰🌱🌳 で表示
}
```

### 2. TaskItem（項目）※中間階層
```dart
class TaskItem {
  final String id;           // UUID
  final String title;        // 項目名
  final String? description; // 説明（任意）
  final List<Task> tasks;    // 関連するタスク
  final DateTime createdAt;  // 作成日時
  
  // 進捗率を自動計算（配下のタスクの平均値）
  double get progressPercentage;
  String get progressLabel;   // 🌰🌱🌳 で表示
}
```

### 3. Task（タスク）※最小単位
```dart
class Task {
  final String id;           // UUID
  final String title;        // タスク名
  final TaskProgress progress; // 進捗状態
  final DateTime createdAt;   // 作成日時
}

enum TaskProgress {
  notStarted(0, '未着手'),    // 🌰
  inProgress(50, 'ちょっとやった'), // 🌱
  completed(100, '完了');     // 🌳
}
```

## 🛠️ 機能詳細

### 1. プロジェクト管理（最上位階層）
- **一覧表示**: 作成したプロジェクトの一覧表示
- **新規作成**: プロジェクト名・説明の入力
- **編集**: 既存プロジェクトの編集
- **削除**: 不要プロジェクトの削除
- **並び替え**: ドラッグ&ドロップで順序変更
- **進捗表示**: 配下の項目の平均値で自動計算

### 2. 項目管理（中間階層）
- **項目追加**: プロジェクトに新しい項目を追加
- **項目編集**: 項目名・説明の変更
- **項目削除**: 不要項目の削除
- **並び替え**: ドラッグ&ドロップで項目順序変更
- **進捗表示**: 配下のタスクの平均値で自動計算

### 3. タスク管理（最小単位）
- **タスク追加**: 項目に新しいタスクを追加
- **進捗更新**: 3段階の進捗切り替え（タップ操作）
  - 未着手（0%）→ ちょっとやった（50%）→ 完了（100%）
- **タスク編集**: タスク名の変更
- **タスク削除**: 不要タスクの削除
- **並び替え**: ドラッグ&ドロップでタスク順序変更

### 4. 進捗可視化
- **階層別プログレスバー**: 
  - プロジェクト全体の進捗（項目の平均値）
  - 項目の進捗（タスクの平均値）
  - タスクの進捗（3段階直接指定）
- **アニメーション進捗表示**: 
  - 進捗率が変更されたときに数値とバーが滑らかにアニメーション
  - アニメーション時間: 0.5秒（500ms）
  - 段階的な数値変化: 30% → 30.1% → 30.2% ... → 50%
- **アイコン表示**: 🌰🌱🌳 で進捗状態を表現
- **統計情報**: 各階層の項目数・進捗率の表示

### 5. データ永続化
- **ローカル保存**: SharedPreferencesによるJSON形式での保存
- **型安全性**: 堅牢なJSONパース処理とエラーハンドリング

### 6. UI/UX デザイン
- **カラーテーマ**: 緑系（#66BB6A, #2E7D2E）で自然・成長を表現
- **やさしいデザイン**: 角丸カード、ソフトな色調
- **直感的操作**: タップで進捗切り替え、長押しでコンテキストメニュー
- **階層表示**: 展開/折りたたみで階層構造を表現

## 🔧 技術仕様

### 依存関係パッケージ
- `flutter_localizations`: 国際化対応
- `shared_preferences`: ローカルデータ保存
- `uuid`: 一意ID生成
- `google_mobile_ads`: 広告表示
- `flutter_dotenv`: 環境変数管理

### プラットフォーム対応
- **Android**: ネイティブ広告ファクトリー実装
- **iOS**: SwiftでのAdMob統合
- **Web**: PWA対応
- **Windows/Linux/macOS**: デスクトップアプリ対応

## 📂 ファイル構成
```
lib/
├── main.dart                 # アプリエントリーポイント
├── src/
│   ├── app.dart             # アプリケーション設定
│   ├── controllers/         # 状態管理
│   │   └── yaru_koto_controller.dart
│   ├── models/              # データモデル
│   │   ├── yaru_koto.dart   # プロジェクトモデル
│   │   ├── task_item.dart   # 項目モデル（中間階層）
│   │   └── task.dart        # タスクモデル（最小単位）
│   ├── services/            # ビジネスロジック
│   │   ├── yaru_koto_service.dart
│   │   └── admob_service.dart
│   ├── views/               # UI画面
│   │   ├── yaru_koto_list_view.dart      # プロジェクト一覧
│   │   ├── yaru_koto_detail_view.dart    # プロジェクト詳細（項目一覧）
│   │   ├── task_item_detail_view.dart    # 項目詳細（タスク一覧）
│   │   └── dialogs/
│   └── settings/            # 設定関連
```

## 🎨 デザインガイドライン
- **メインカラー**: #66BB6A（緑）
- **アクセントカラー**: #2E7D2E（濃い緑）
- **背景色**: #F8FCF8（薄い緑）
- **フォント**: システムフォント
- **アイコン**: Material Icons + 絵文字（🌰🌱🌳）

## 📱 ユーザーフロー
1. **アプリ起動** → プロジェクト一覧表示
2. **プロジェクト作成** → 新規ダイアログ → 項目追加
3. **項目管理** → プロジェクト詳細画面 → 項目一覧表示
4. **タスク管理** → 項目詳細画面 → タスク一覧表示・進捗更新
5. **進捗更新** → タスクタップ → 3段階切り替え
6. **全体確認** → 各階層の進捗バー・統計で現状把握

### 画面構造
```
プロジェクト一覧画面
├── プロジェクト詳細画面（項目一覧）
│   ├── 項目詳細画面（タスク一覧）
│   │   ├── タスク追加ダイアログ
│   │   └── タスク編集ダイアログ
│   ├── 項目追加ダイアログ
│   └── 項目編集ダイアログ
├── プロジェクト追加ダイアログ
└── プロジェクト編集ダイアログ
```

## 🚀 今後の拡張予定
- **統計・分析機能**: 進捗履歴の可視化
- **通知機能**: やさしいリマインダー
- **カスタマイズ**: テーマカラー・アイコン変更
- **エクスポート**: 進捗データのバックアップ機能
